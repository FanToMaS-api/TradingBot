# Описание методов библиотеки

Ниже приведены описания методов, реализованных в рамках разработки библиотеки **BinanceExchange**.

Непосредственно взаимодействие с библиотекой происходит через одноименный класс `BinanceExchange`, объект которого [можно получить](docs/examples.md) через фабрику `BinanceExchangeFactory.`

### ОГЛАВЛЕНИЕ

1. [Кошелек](#Кошелек)

   Получение данных по состоянию капитала и аккаунта в целом.

2. [Рыночные данные](#Рыночные_данные)

   Получение информации, непосредственно связанной с торговлей.

3. [Торговля](#Торговля)

   Создание ордеров.

4. [Подписка на потоки рыночных данных](#Подписка)

   Непрерывное получение данных рынка.

## <a name="Кошелек">Кошелек</a>

- ```c#
  Task<bool> GetSystemStatusAsync(CancellationToken cancellationToken = default);
  ```

  Метод определяет текущее состояние системы, которая пребывает в одном из двух возможных вариантов:

  - Нормальное (`true`)
  - Техническое обслуживание (`false`)

- ```c#
  Task<TradingAccountInfoModel> GetAccountTradingStatusAsync(long recvWindow = 5000, CancellationToken cancellationToken = default);
  ```

  Получить непосредственно статус аккаунта. 

  Возвращает объект `TradingAccountInfoModel`, содержащий информацию о торговом статусе трейдера.

  - Признак блокировки пользователя
  - Длительность блокировки
  - Время обновления

  Входной параметр - время в миллисекундах, после которого запрос становится недействительным (по умолчанию - 5000 мс).

- ```c#
  Task<IEnumerable<CoinModel>> GetAllCoinsInformationAsync(long recvWindow = 5000, CancellationToken cancellationToken = default);
  ```

  Получить информацию о доступных для ввода и вывода активах пользователя.

  Возвращает объект `CoinModel`, содержащий название тикера и полное название валюты.

- ```c#
  Task<IEnumerable<TradeFeeModel>> GetTradeFeeAsync(string symbol = null, long recvWindow = 5000, CancellationToken cancellationToken = default);
  ```

  Получить величину комиссии по указанной паре или по всем парам сразу. 

  Возвращает коллекцию элементов типа `TradeFeeModel`, содержащую обозначение пары, а также комиссии на куплю и продажу.

## <a name="Рыночные_данные">Рыночные данные</a>

- ```c#
  Task<IEnumerable<SymbolRuleTradingModel>> GetExchangeInfoAsync(CancellationToken cancellationToken = default);
  ```

  Получить текущие правила биржевой торговли и информацию о символах.

  Возвращает коллекцию `SymbolRuleTradingModel`, содержащую информацию о правилах биржевой торговли, в том числе:

  - Название пары
  - Статус
  - Базовая валюта
  - Требуемое количество символов базовой валюты после запятой при создании ордера (для цены и количества)
  - Квотируемая валюта
  - Требуемое количество символов квотируемой валюты после запятой при создании ордера (для цены и количества)
  - Разрешено ли создание айсбергов
  - Разрешено ли создание OCO-ордеров

- ```c#
  Task<OrderBookModel> GetOrderBookAsync(string symbol, int limit = 100, CancellationToken cancellationToken = default);
  ```

  Получить книгу ордеров по определенной паре. 

  В качестве параметров получает название пары и количество записей в ответе (по умолчанию - 100).

  Возвращает `OrderBookModel`, содержащий списки ордеров на покупку и продажу (количество и цена), а также идентификатор последнего обновления.

- ```c#
  Task<IEnumerable<TradeModel>> GetRecentTradesAsync(string symbol, int limit = 500, CancellationToken cancellationToken = default);
  ```

  Получить последние сделки. 

  В качестве параметров получает название пары и количество записей в ответе (по умолчанию - 100).

  Возвращает коллекцию `TradeModel`, каждый из которых содержит информацию о сделке в виде ее идентификатора, цены, количества, времени и т. д.

- ```c#
  Task<IEnumerable<TradeModel>> GetOldTradesAsync(string symbol, long? fromId = null, int limit = 500, CancellationToken cancellationToken = default);
  ```

  Получить старые рыночные сделки по паре. 

  В качестве параметров получает название пары, количество записей в ответе (по умолчанию - 100), начальный идентификатор (по умолчанию - старейший, так, что в результате будут получены самые старые сделки).

  Возвращает коллекцию `TradeModel`, каждый из которых содержит информацию о сделке в виде ее идентификатора, цены, количества, времени и т. д.

- ````c#
  Task<IEnumerable<CandlestickModel>> GetCandlestickAsync(  
                                      string symbol,
                                      string interval,
                                      long? startTime = null,
                                      long? endTime = null,
                                      int limit = 500,
                                      CancellationToken cancellationToken = default);
  ````

  Получить бары Клайна или свечи для символа. Бары Клайна однозначно идентифицируются по их открытому времени.

  В качестве параметров получает название пары, период свечи, а также необязательные параметры времени начала и конца периода построения и количество свечей (по умолчанию - 500, максимум - 1000). Если `startTime` и `endTime` не отправлены, возвращаются самые последние свечи.

  В возвращаемой коллекции моделей `CandlestickModel` содержится исчерпывающая информация по торговому объекту, в том числе - время открытия/закрытия, минимальная/максимальная цены и т. д.

- ```c#
  Task<double> GetAveragePriceAsync(string symbol, CancellationToken cancellationToken = default);
  ```

  Получить текущую среднюю цены пары. 

  В качестве параметров получает название пары.

  Возвращает среднюю цену в формате числа с плавающей точкой двойной точности.

- ```c#
  Task<IEnumerable<DayPriceChangeModel>> GetDayPriceChangeAsync(string symbol, CancellationToken cancellationToken = default);
  ```

  Получить статистику изменения цен в скользящем интервале 24 часа. 

  В качестве параметров получает название пары. Если оно не передано (`null` или `""`), то тикеры для всех пар будут возвращены в виде коллекции.

  Возвращает коллекцию из объектов `DayPriceChangeModel`, при указании названия пары - состоящую из одного элемента, каждый из которых содержит полный набор статистических данных о ценах, объемах спроса/предложения и т. д.

- ```c#
  Task<IEnumerable<SymbolPriceModel>> GetSymbolPriceTickerAsync(string symbol, CancellationToken cancellationToken = default);
  ```

  Получить последнюю цену пары или пар.

  В качестве параметров получает название пары. Если оно не передано (`null` или `""`), то тикеры для всех пар будут возвращены в виде коллекции.

  Возвращает коллекцию из объектов `SymbolPriceTickerModel`, при указании названия пары - состоящую из одного элемента, каждый из которых содержит название пары и цену.

- ```c#
  Task<IEnumerable<BestSymbolOrderModel>> GetBestSymbolOrdersAsync(string symbol, CancellationToken cancellationToken = default);
  ```

  Получить лучшую цену/количество в стакане для символа или символов.

  В качестве параметров получает название пары. Если оно не передано (`null` или `""`), то тикеры для всех пар будут возвращены в виде коллекции.

  Возвращает коллекцию из объектов `BestSymbolOrderModel`, при указании названия пары - состоящую из одного элемента, каждый из которых содержит название пары, лучшую цену и количество спроса и предложения.